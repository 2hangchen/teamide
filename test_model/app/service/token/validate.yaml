api: # 暴露服务接口
  request:
    path: /token/validate # 提供WEB 接口能力

inVariables: # 定义入参变量
  - access_token:
      dataType: string # 参数 user 类型为 结构体 userInfo 类型
      dataPlace: header # 通过request body传参

outVariable: # 定义出参变量
  name: accessInfo
  dataType: accessInfo

steps:
  - validates: # 验证数据完整性
      - access_token:
          required: true
          errorMsg: access_token不能为空

  - variables:
      - accessInfoJson: 
          value: aesCBCDecrypt(access_token, $AES_KEY)
          tryError: ACCESS_TOKEN_ERROR

  - if: "accessInfoJson == ''"
    error: ACCESS_TOKEN_ERROR

  - variables:
      - accessInfo:
          dataType: accessInfo
          value: JSONToData(accessInfoJson)